<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cadastro de Usuário</title>
</head>
<body>
  <h2>Cadastro de Usuário</h2>
  <form id="formCadastro" onsubmit="return validarFormulario()">

    <label for="nome">Nome completo:</label><br>
    <input type="text" id="nome" required><br><br>

    <label for="nascimento">Data de nascimento:</label><br>
    <input type="date" id="nascimento" required><br><br>

    <label for="sexo">Sexo:</label><br>
    <select id="sexo" required>
      <option value="">Selecione</option>
      <option value="Masculino">Masculino</option>
      <option value="Feminino">Feminino</option>
      <option value="Outro">Outro</option>
    </select><br><br>

    <label for="mae">Nome da mãe:</label><br>
    <input type="text" id="mae" required><br><br>

    <label for="cpf">CPF (somente números):</label><br>
    <input type="text" id="cpf" maxlength="11" required><br><br>

    <label for="email">E-mail:</label><br>
    <input type="email" id="email" required><br><br>

    <label for="celular">Celular:</label><br>
    <input type="tel" id="celular" required><br><br>

    <label for="endereco">Cep:</label><br>
    <input type="text" id="endereco" required><br><br>

    <label for="endereco">Endereço completo:</label><br>
    <input type="text" id="endereco" required><br><br>

    <label for="login">Login:</label><br>
    <input type="text" id="login" required><br><br>

    <label for="senha">Senha:</label><br>
    <input type="password" id="senha" required><br><br>

    <label for="confirmarSenha">Confirmar senha:</label><br>
    <input type="password" id="confirmarSenha" required><br><br>

    <button type="submit">Enviar</button>
    <button type="reset">Limpar</button>

    <p id="mensagem"></p>
  </form>

  <script>
    function validarCPF(cpf) {
      cpf = cpf.replace(/\D/g, '');
      if (cpf.length !== 11 || /^(\d)\1+$/.test(cpf)) return false;

      let soma = 0;
      for (let i = 0; i < 9; i++) soma += parseInt(cpf[i]) * (10 - i);
      let resto = (soma * 10) % 11;
      if (resto === 10 || resto === 11) resto = 0;
      if (resto !== parseInt(cpf[9])) return false;

      soma = 0;
      for (let i = 0; i < 10; i++) soma += parseInt(cpf[i]) * (11 - i);
      resto = (soma * 10) % 11;
      if (resto === 10 || resto === 11) resto = 0;
      if (resto !== parseInt(cpf[10])) return false;

      return true;
    }

    function validarFormulario() {
      const nome = document.getElementById("nome").value;
      const nascimento = document.getElementById("nascimento").value;
      const sexo = document.getElementById("sexo").value;
      const mae = document.getElementById("mae").value;
      const cpf = document.getElementById("cpf").value;
      const email = document.getElementById("email").value;
      const celular = document.getElementById("celular").value;
      const endereco = document.getElementById("endereco").value;
      const login = document.getElementById("login").value;
      const senha = document.getElementById("senha").value;
      const confirmarSenha = document.getElementById("confirmarSenha").value;
      const mensagem = document.getElementById("mensagem");

      if (!validarCPF(cpf)) {
        mensagem.textContent = "CPF inválido.";
        return false;
      }

      if (senha !== confirmarSenha) {
        mensagem.textContent = "As senhas não coincidem.";
        return false;
      }

      // Salvar dados mínimos no localStorage (login/senha)
      localStorage.setItem("usuario", login);
      localStorage.setItem("senha", senha);

      mensagem.textContent = "Cadastro realizado com sucesso! Redirecionando...";

      setTimeout(() => {
        window.location.href = "index.html";
      }, 2000);

      return false;
    }
  </script>
</body>
</html>